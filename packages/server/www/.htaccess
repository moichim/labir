# Apache configuration file (see https://httpd.apache.org/docs/current/mod/quickreference.html)

# Diagnostické hlavičky pro debugging 403 chyb
<IfModule mod_headers.c>
	Header always set X-Debug-Htaccess "loaded"
	Header always set X-Debug-Request-URI "%{REQUEST_URI}e"
	Header always set X-Debug-Filename "%{REQUEST_FILENAME}e"
</IfModule>

# Allow access to all resources by default
Require all granted

# Disable directory listing for security reasons
<IfModule mod_autoindex.c>
	Options -Indexes
</IfModule>

# Enable pretty URLs (removing the need for "index.php" in the URL)
<IfModule mod_rewrite.c>
	RewriteEngine On

	# Uncomment the next line if you want to set the base URL for rewrites
	# RewriteBase /

	# Force usage of HTTPS (secure connection). Uncomment if you have SSL setup.
	# RewriteCond %{HTTPS} !on
	# RewriteRule .? https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

	# Permit requests to the '.well-known' directory (used for SSL verification and more)
	RewriteRule ^\.well-known/.* - [L]

	# Pokud je požadavek na existující soubor nebo adresář, neřeš
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteCond %{REQUEST_FILENAME} !-d

	# Přesměruj vše na index.php (včetně OPTIONS, GET, POST)
	RewriteRule ^ index.php [QSA,L]
</IfModule>

# Enable gzip compression for text files
<IfModule mod_deflate.c>
	AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css application/javascript application/json application/xml application/rss+xml image/svg+xml
</IfModule>

# CORS hlavičky pouze pro GET požadavky na .lrc soubory
<IfModule mod_headers.c>
	<FilesMatch "\.lrc$">
		Header always set Access-Control-Allow-Origin "*"
		Header always set Access-Control-Allow-Methods "GET"
		Header always set Access-Control-Allow-Headers "Origin, X-Requested-With, Content-Type, Accept"
		Header always set X-Debug-File "lrc-file-accessed"
	</FilesMatch>
	

</IfModule>
