(()=>{"use strict";var e,s={937:()=>{const e=window.wp.blocks,s=window.wp.i18n,l=window.wp.element,t=window.wp.blockEditor,a=window.wp.components,i="labir_embed_lib_dynamical",n=window.location.origin,o=e=>{const s=e.createElement("script");return s.type="module",s.id=i,s.innerHTML=`import '${n}/wp-content/plugins/thermal-display/assets/embed.esm.js'`,s},r=e=>!!e.getElementById(i),c=window.ReactJSXRuntime,d=({thermal:e,open:s,setOpen:t,attributes:i,setAttributes:n})=>{const o=(0,l.useMemo)((()=>(1e6*Math.random()).toFixed(0)),[]),r=(0,l.useCallback)((e=>`${o}__${e}`),[o]),{palette:d,from:h,to:p,analysis1:u,analysis2:m,analysis3:y,analysis4:v,analysis5:x,analysis6:b,analysis7:f}=i,j=(0,l.useCallback)((e=>{if(e){const s=e=>{e.slots.onSlot1Serialize.set(o,(e=>n({analysis1:e}))),e.slots.onSlot2Serialize.set(o,(e=>n({analysis2:e}))),e.slots.onSlot3Serialize.set(o,(e=>n({analysis3:e}))),e.slots.onSlot4Serialize.set(o,(e=>n({analysis4:e}))),e.slots.onSlot5Serialize.set(o,(e=>n({analysis5:e}))),e.slots.onSlot6Serialize.set(o,(e=>n({analysis6:e}))),e.slots.onSlot7Serialize.set(o,(e=>n({analysis7:e})))};e.onInstanceCreated.set(r("instance_created__2"),s)}}),[e]),g=u||m||y||v||x||b||f;return s?(0,c.jsx)(a.Modal,{title:"Analysis editor",isFullScreen:!0,onRequestClose:()=>t(!1),children:(0,c.jsx)("manager-provider",{slug:r("manager"),palette:d,children:(0,c.jsx)("registry-provider",{from:h,to:p,autoclear:!0,children:(0,c.jsx)("group-provider",{autoclear:!0,children:(0,c.jsxs)("file-provider",{thermal:e,ref:j,analysis1:u,analysis2:m,analysis3:y,analysis4:v,analysis5:x,analysis6:b,analysis7:f,autoclear:!0,batch:!0,children:[(0,c.jsxs)("div",{className:"modal-editor__container",children:[(0,c.jsxs)("div",{className:"modal-editor__canvas",children:[(0,c.jsx)("file-canvas",{}),(0,c.jsx)("div",{children:(0,c.jsx)("file-timeline",{})})]}),(0,c.jsxs)("div",{className:"modal-editor__details",children:[(0,c.jsx)("group-tool-buttons",{style:{paddingBottom:"1rem"}}),(0,c.jsx)("div",{style:{},children:(0,c.jsx)("file-analysis-table",{forceinteractiveanalysis:!0})}),(0,c.jsx)("div",{style:{height:300},children:(0,c.jsx)("file-analysis-graph",{style:{height:"300px"}})})]})]}),(0,c.jsxs)("div",{className:"modal-editor__footer",children:[g&&(0,c.jsx)(a.Button,{size:"compact",variant:"secondary",onClick:()=>{n({analysis1:void 0,analysis2:void 0,analysis3:void 0,analysis4:void 0,analysis5:void 0,analysis6:void 0,analysis7:void 0})},children:"Remove all analyses"}),(0,c.jsx)(a.Button,{size:"compact",variant:"primary",style:{},onClick:()=>t(!1),children:"Save & Close"})]})]})})})})}):(0,c.jsx)(c.Fragment,{})},h=(e,s)=>`${e}~${s}`,p=(e,s)=>e.split(s).map((e=>e.trim())),u=e=>{const s=p(e,";").map((e=>{const s=p(e,"|").map((e=>{const[s,l]=p(e,"~");return[s,l]}));return s})).map((e=>Object.fromEntries(e)));return Object.fromEntries(s.map((e=>[e.thermal,e])))},m=({skin:e,lines:s,corners:l,setter:t})=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(a.SelectControl,{label:"Skin",value:e,options:[{label:"Default",value:"default"},{label:"Dark",value:"dark"},{label:"Dark HC",value:"darkhc"},{label:"Solarized",value:"solarized"},{label:"System",value:"system"}],onChange:e=>t({skin:e})}),(0,c.jsx)(a.SelectControl,{label:"Corners",value:l,options:[{label:"Default",value:"default"},{label:"Narrow",value:"narrow"}],onChange:e=>t({corners:e})}),(0,c.jsx)(a.SelectControl,{label:"Lines",value:s,options:[{label:"Default",value:"default"},{label:"Big",value:"big"}],onChange:e=>t({lines:e})})]}),y=JSON.parse('{"UU":"thermal-display/group"}');(()=>{const e=o(document);document.head.appendChild(e)})(),(0,e.registerBlockType)(y.UU,{edit:function({attributes:e,setAttributes:i}){const n=(0,l.useMemo)((()=>Math.random().toString()));(0,l.useEffect)((()=>{const e=document.querySelectorAll("iframe");for(let s=0;s<e.length;s++){const l=e[s];if("editor-canvas"===l.name){const e=l.contentWindow.document;if(!r(e)){const s=o(e);e.head.appendChild(s)}}}}),[]);const{webcomponent:p,palette:y,thermal:v,files:x,opacity:b,visible:f,label:j,description:g,author:k,license:C,from:w,to:_,analysis1:S,analysis2:O,analysis3:M,analysis4:B,analysis5:N,analysis6:E,analysis7:T,speed:L,showabout:U,showhistogram:z,interactiveanalysis:F,preservetime:A}=e,D=(e=>{const s=(0,l.useMemo)((()=>e),[]),t=(0,l.useMemo)((()=>void 0===e?{}:u(e)),[]),[a,i]=(0,l.useState)(t),[n,o]=(0,l.useState)(s);(0,l.useEffect)((()=>{s&&i(u(s))}),[s]),(0,l.useEffect)((()=>{if("object"==typeof a){let e="";const s=[];Object.entries(a).forEach((([e,l])=>{const t=Object.keys(l);if(t.includes("thermal")){const e=[h("thermal",l.thermal)];t.includes("visible")&&e.push("visible",h("visible",l.visible)),t.includes("note")&&e.push("note",h("note",l.note)),t.includes("label")&&e.push(h("label",l.label));const a=(e=>e.join("|"))(e);s.push(a)}})),e=s.join(";"),e.length>0?o(e):o(void 0)}else o(void 0)}),[a]);const r=(0,l.useCallback)(((e,s,l,t)=>{Object.keys(a).includes(e)?(a[e]={...a[e],visible:s,label:l,note:t},i({...a})):e.length>0&&e&&(a[e]={visible:s,thermal:e,label:l,note:t},i({...a}))}),[i,a]),c=(0,l.useCallback)((e=>{if(Object.keys(a).includes(e)){const{[e]:s,...l}=a;i(l)}}),[i,a]),d=(0,l.useCallback)((e=>{const s={...a},l=Object.keys(s);e.forEach((e=>{l.includes(e)||(console.log("added",e),s[e]={thermal:e})})),l.forEach((l=>{e.includes(l)||(console.log("removing",l),delete s[l])})),i(s)}),[a,i]),p=(0,l.useCallback)(((e,s)=>{if(Object.keys(a).includes(e)){const l={...a},t={...l[e],thermal:s};delete l[e],l[s]=t,i(l)}}),[a,i]),m=(0,l.useCallback)(((e,s)=>{if(console.log(e,s),Object.keys(a).includes(e)){const l={...a};l[e].label=s,i(l)}}),[a,i]),y=(0,l.useCallback)(((e,s)=>{if(Object.keys(a).includes(e)){const l={...a};l[e]=s,i(l)}}),[a,i]);return{files:a,parsed:n,addFile:r,removeFile:c,syncUrls:d,updateFileLabel:m,updateFileUrl:p,updateFileNote:y}})(x);(0,l.useEffect)((()=>{D.parsed!==x&&i({files:D.parsed})}),[D.parsed]);const[R,I]=(0,l.useState)(v),[P,H]=(0,l.useState)(),{open:$,setOpen:Z}=(()=>{const[e,s]=(0,l.useState)(!1);return{open:e,setOpen:s}})(),V=()=>{I(v),i({thermal:v})},q=((0,l.useCallback)((e=>{console.log("displaysettingcallback",e,e.registry),e&&e.registry.range.addListener(n,(e=>{i(e instanceof Object?e:{from:void 0,to:void 0})}))}),[]),(0,l.useRef)()),[J,G]=(0,l.useState)();return(0,l.useEffect)((()=>{console.log(">>>",q.current),void 0===J&&(setTimeout((()=>{if(null!==q.current){const e=q.current.group;e.registry.palette.addListener(n,(e=>{i({palette:e})})),e.registry.range.addListener(n,(e=>{e&&i(e)})),e.analysisSync.onSlotSync.set(n,((e,s)=>{const l=`analysis${s}`;console.log(l,e),i({[l]:e})})),q.current.onColumns.set(n,(e=>{i({columns:e})})),G(q.current.group)}}),0),console.log("==========",q.current))}),[q.current,J,G,i]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(t.MediaUploadCheck,{children:(0,c.jsxs)(t.InspectorControls,{children:[(0,c.jsxs)(a.PanelBody,{title:"Thermal files",children:[(0,c.jsx)(d,{thermal:v,open:$,setOpen:Z,attributes:e,setAttributes:i}),(0,c.jsxs)("div",{style:{marginBottom:"1rem",marginTop:v?"1rem":"0"},children:[(0,c.jsx)(t.MediaUpload,{allowedTypes:["application/octet-stream"],multiple:!0,onSelect:e=>{if(console.log(">>>>>",e),Array.isArray(e)){const s=e.map((e=>e.url));D.syncUrls(s)}},render:({open:e})=>(0,c.jsx)(a.Button,{onClick:()=>{V(),e()},variant:"primary",children:"Upload or select a LRC files"})}),Object.values(D.files).map((e=>{let s=e.label?e.label:e.thermal.match(/[^/]*$/)[0];return(0,c.jsx)(a.Panel,{children:(0,c.jsxs)(a.PanelBody,{title:s,initialOpen:!1,children:[(0,c.jsx)(a.TextControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,onChange:s=>{D.updateFileLabel(e.thermal,s)},value:e.label,label:"Label"}),(0,c.jsx)(a.Button,{variant:"primary",isDestructive:!0,size:"small",onClick:()=>D.removeFile(e.thermal),children:"Remove"})]})})}))]})]}),(0,c.jsxs)(a.PanelBody,{title:"Information",initialOpen:!1,children:[(0,c.jsx)(a.TextControl,{label:(0,s.__)("Author","thermal-display"),value:k||"",onChange:e=>i({author:e})}),(0,c.jsx)(a.TextControl,{label:(0,s.__)("License","thermal-display"),value:C||"",onChange:e=>i({license:e})}),(0,c.jsx)(a.TextControl,{label:(0,s.__)("Label","thermal-display"),help:"Label appears on the black button on top & left of the app.",value:j||"",onChange:e=>i({label:e})})]}),(0,c.jsxs)(a.PanelBody,{title:"Display settings",children:[(0,c.jsx)(a.CheckboxControl,{__nextHasNoMarginBottom:!0,checked:z,label:"Show histogram",hint:"Enable histogram display in the thermal scale?",onChange:e=>{i({showhistogram:e})}}),(0,c.jsx)(a.CheckboxControl,{__nextHasNoMarginBottom:!0,checked:U,label:"Show about button",help:"Display the button with application info?",onChange:e=>{i({showabout:e})}}),(0,c.jsx)(a.CheckboxControl,{__nextHasNoMarginBottom:!0,checked:F,label:"Interactive analysis",help:"Should the visitor be able to edit analysis?",onChange:e=>{i({interactiveanalysis:e})}}),(0,c.jsx)(a.CheckboxControl,{__nextHasNoMarginBottom:!0,checked:A,label:"Preserve time in file labels",help:"Should the file time be displayed even if the file has a custom label?",onChange:e=>{i({preservetime:e})}}),(0,c.jsx)(m,{...e,setter:i})]})]})}),(0,c.jsx)("div",{...(0,t.useBlockProps)(),children:void 0!==D.parsed?(0,c.jsx)(a.Tooltip,{text:"Click on to edit",delay:300,hideOnClick:!1,children:(0,c.jsx)("thermal-group-app",{files:D.parsed,label:j,author:k,license:C,palette:y,ref:q,analysis1:S,analysis2:O,analysis3:M,analysis4:B,analysis5:N,analysis6:E,analysis7:T,showabout:U,showhistogram:z,interactiveanalysis:F,preservetime:A,skin:e.skin,lines:e.lines,corners:e.corners})}):(0,c.jsx)(a.Placeholder,{label:"Thermal group",instructions:"Display multiple IR recordings taken by IR camera TIMI Edu.",icon:(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 512 512",children:(0,c.jsx)("g",{children:(0,c.jsxs)("g",{id:"Vrstva_1",children:[(0,c.jsx)("path",{d:"M327.6,240c-5.4-4.7-13.6-7.1-24.6-7.1h-51.9v60.8h52c10.9,0,19-2.4,24.6-7.2s8.2-12.7,8.2-23.6-2.8-18.1-8.3-22.8Z"}),(0,c.jsx)("path",{d:"M252.4,0L18.9,90.7h-.6v421.3h466.9V90.7h.6L252.4,0ZM161.8,411.9h-47.5v-216h47.5v216ZM342.1,411.9c-2.8-7.9-4.5-16.2-4.9-24.6-.6-9.5-1.5-18.4-2.7-27.2-1.6-11.3-5-19.5-10.3-24.8s-13.8-7.9-25.7-7.9h-47.5v84.4h-47.5v-215.9h116.4c8.9-.1,17.8,1.5,26.2,4.7,7.4,2.9,14.2,7.3,19.9,12.8,5.5,5.4,9.8,11.8,12.7,18.9,3,7.3,4.5,15.2,4.4,23.1.3,11.5-2.4,22.9-7.9,33-6,9.9-15.3,17.3-26.2,21.2v.6c5.3,1.3,10.3,3.9,14.5,7.4,3.8,3.3,7,7.3,9.4,11.8,2.5,4.7,4.3,9.7,5.3,15,1.1,5.4,1.9,10.9,2.3,16.3.2,3.4.4,7.5.6,12.1s.6,9.2,1.1,14.2c.5,4.6,1.3,9.2,2.4,13.7.9,4,2.6,7.7,5,11.1h-47.6Z"})]})})}),children:(0,c.jsx)(t.MediaUpload,{allowedTypes:["application/octet-stream"],multiple:!0,onSelect:e=>{if(Array.isArray(e)){const s=e.map((e=>e.url));D.syncUrls(s)}},render:({open:e})=>(0,c.jsx)(a.Button,{onClick:()=>{V(),e()},variant:"primary",children:v?"Change file":"Upload or select a LRC file"})})})})]})},icon:{src:(0,c.jsxs)("svg",{id:"Vrstva_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:[(0,c.jsx)("defs",{children:(0,c.jsxs)("linearGradient",{id:"Nepojmenovaný_přechod_12","data-name":"Nepojmenovaný přechod 12",x1:"284.42",y1:"36.32",x2:"4.77",y2:"252.5",gradientUnits:"userSpaceOnUse",children:[(0,c.jsx)("stop",{offset:"0","stop-color":"#eae200"}),(0,c.jsx)("stop",{offset:".34","stop-color":"#d42900"}),(0,c.jsx)("stop",{offset:"1","stop-color":"#0007bf"})]})}),(0,c.jsx)("rect",{x:"1",width:"511",height:"406.08",rx:"19.65",ry:"19.65"}),(0,c.jsx)("rect",{x:"25",y:"80.12",width:"219.72",height:"143.62",rx:"7.86",ry:"7.86",fill:"url(#Nepojmenovaný_přechod_12)"}),(0,c.jsx)("rect",{x:"262.54",y:"80.12",width:"219.72",height:"143.62",rx:"7.86",ry:"7.86",fill:"url(#Nepojmenovaný_přechod_12)"}),(0,c.jsx)("rect",{x:"25",y:"238",width:"219.72",height:"143.62",rx:"7.86",ry:"7.86",fill:"url(#Nepojmenovaný_přechod_12)"}),(0,c.jsx)("rect",{x:"262.54",y:"238",width:"219.72",height:"143.62",rx:"7.86",ry:"7.86",fill:"url(#Nepojmenovaný_přechod_12)"}),(0,c.jsx)("line",{x1:"31.36",y1:"30",x2:"100.3",y2:"30",fill:"none",stroke:"#818080","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"11.89"}),(0,c.jsxs)("g",{children:[(0,c.jsx)("path",{d:"M481.05,512v-171.78s.02-.09.03-.13c1.15-6.15-2.24-12.25-8.07-14.51l-96.57-37.53c-1.51-.59-3.11-.88-4.71-.88h0c-1.6,0-3.19.29-4.71.88l-95.38,37.05c-5.62,1.44-9.77,6.53-9.77,12.6v174.31h219.17Z",fill:"#fff"}),(0,c.jsx)("polyline",{points:"371.74 300.17 468.3 337.69 468.05 337.69 468.05 512 274.88 512 274.88 337.69 275.13 337.69 371.74 300.17"}),(0,c.jsx)("path",{d:"M351.14,468.3h23.02v-40.9h23.02c5.77,0,9.89,1.26,12.45,3.83,2.57,2.57,4.22,6.54,4.99,12.02.58,4.26,1.02,8.58,1.31,13.18.19,4.05,1.01,8.06,2.36,11.87h-.03l.05.05s-.01-.03-.02-.05h23.03c-1.16-1.65-1.99-3.44-2.42-5.38-.53-2.18-.92-4.41-1.16-6.64-.24-2.42-.44-4.65-.53-6.88s-.19-4.22-.29-5.86c-.19-2.62-.58-5.28-1.11-7.9-.48-2.57-1.36-4.99-2.57-7.27-1.16-2.18-2.71-4.12-4.55-5.72-2.04-1.7-4.46-2.96-7.03-3.59v-.29c5.28-1.89,9.79-5.48,12.7-10.27,2.67-4.89,3.97-10.42,3.83-15.99.05-3.83-.68-7.66-2.13-11.19-1.41-3.44-3.49-6.54-6.15-9.16-2.76-2.67-6.06-4.8-9.64-6.2-3.95-1.51-8.13-2.28-12.31-2.28-.13,0-.25,0-.38,0h-56.4v104.62",fill:"#fff"}),(0,c.jsx)("polyline",{points:"307.91 468.35 330.93 468.35 330.93 363.69 307.91 363.69 307.91 468.35",fill:"#fff"}),(0,c.jsxs)("g",{children:[(0,c.jsx)("path",{d:"M411.27,385.05c-2.62-2.28-6.59-3.44-11.92-3.44h-25.15v29.46h25.2c5.28,0,9.21-1.16,11.92-3.49,2.71-2.33,3.97-6.15,3.97-11.44s-1.36-8.77-4.02-11.05v-.05Z"}),(0,c.jsx)("path",{d:"M399.35,381.61c5.33,0,9.3,1.16,11.92,3.44v.05c2.67,2.28,4.02,5.77,4.02,11.05s-1.26,9.11-3.97,11.44c-2.71,2.33-6.64,3.49-11.92,3.49h-25.2v-29.46h25.15"})]})]}),(0,c.jsx)("line",{x1:"31.36",y1:"59.57",x2:"481.52",y2:"59.57",fill:"none",stroke:"url(#Nepojmenovaný_přechod_12)","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"11.89"})]})}})}},l={};function t(e){var a=l[e];if(void 0!==a)return a.exports;var i=l[e]={exports:{}};return s[e](i,i.exports,t),i.exports}t.m=s,e=[],t.O=(s,l,a,i)=>{if(!l){var n=1/0;for(d=0;d<e.length;d++){for(var[l,a,i]=e[d],o=!0,r=0;r<l.length;r++)(!1&i||n>=i)&&Object.keys(t.O).every((e=>t.O[e](l[r])))?l.splice(r--,1):(o=!1,i<n&&(n=i));if(o){e.splice(d--,1);var c=a();void 0!==c&&(s=c)}}return s}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[l,a,i]},t.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),(()=>{var e={557:0,985:0};t.O.j=s=>0===e[s];var s=(s,l)=>{var a,i,[n,o,r]=l,c=0;if(n.some((s=>0!==e[s]))){for(a in o)t.o(o,a)&&(t.m[a]=o[a]);if(r)var d=r(t)}for(s&&s(l);c<n.length;c++)i=n[c],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return t.O(d)},l=globalThis.webpackChunkthermal_display=globalThis.webpackChunkthermal_display||[];l.forEach(s.bind(null,0)),l.push=s.bind(null,l.push.bind(l))})();var a=t.O(void 0,[985],(()=>t(937)));a=t.O(a)})();