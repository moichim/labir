(()=>{"use strict";var e,t={365:()=>{const e=window.wp.blocks,t=window.wp.blockEditor,o=window.wp.components,n=window.wp.element,r="labir_embed_lib_dynamical",l=window.location.origin,s=e=>{const t=e.createElement("script");return t.type="module",t.id=r,t.innerHTML=`import '${l}/wp-content/plugins/thermal-display/assets/embed.esm.js'`,t},a=e=>!!e.getElementById(r),i=window.ReactJSXRuntime,c=JSON.parse('{"UU":"thermal-display/remote-group"}');(()=>{const e=s(document);document.head.appendChild(e)})(),(0,e.registerBlockType)(c.UU,{edit:function({attributes:e,setAttributes:r}){(0,n.useEffect)((()=>{const e=document.querySelectorAll("iframe");for(let t=0;t<e.length;t++){const o=e[t];if("editor-canvas"===o.name){const e=o.contentWindow.document;if(!a(e)){const t=s(e);e.head.appendChild(t)}}}}),[]);const{url:l,subfolder:c,folder:d,palette:h}=e,[u,p]=(0,n.useState)(void 0),[v,f]=(0,n.useState)(void 0),b=(0,n.useCallback)((e=>{try{return new URL(e),!0}catch(e){return!1}}),[]),x=(0,n.useCallback)((e=>{if("string"==typeof e){const t=e.trim();return t.length>0?t:void 0}}),[]),m=(0,n.useCallback)(((e,t)=>{if(!b(e))return;let o=e;return t&&(o+=`?scope=${t}`),o}),[b]),w=(0,n.useCallback)((async()=>{p(void 0),f(void 0);const e=m(l,c),t=await fetch(e);if(t.ok){const e=await t.json();if("success"in e&&"folders"in e&&!0===e.success){const t=Object.values(e.folders).map((e=>({label:`${e.name} (${e.lrc_count})`,value:e.folder})));p(t),Object.keys(e.folders).includes(d)?f(d):void 0===v&&f(Object.keys(e.folders)[0])}}console.log(e)}),[l,c,m,d]);return(0,n.useEffect)((()=>{l&&c&&w()}),[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.InspectorControls,{children:(0,i.jsxs)(o.PanelBody,{title:"Values",children:[(0,i.jsx)(o.TextControl,{label:"API endpoint",help:"Provide the URL of the API endpoint",__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,onChange:e=>{r({url:x(e)})},value:l,required:!0,type:"url"}),(0,i.jsx)(o.TextControl,{label:"Subfolder",help:"Provide the name of the optional subfolder",__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,onChange:e=>{r({subfolder:x(e)})},value:c}),(0,i.jsx)(o.Button,{onClick:w,variant:"primary",children:"Fetch information"}),(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),u&&(0,i.jsx)(o.SelectControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:"Folder",help:"Select a folder from the remote destination",onChange:e=>{r({folder:e}),f(e)},options:u,value:d}),(0,i.jsx)(o.SelectControl,{label:"Palette",value:h,options:[{label:"Iron",value:"iron"},{label:"Jet",value:"jet"},{label:"Grayscale",value:"grayscale"}],onChange:e=>r({palette:e})})]})}),(0,i.jsx)("div",{...(0,t.useBlockProps)(),children:void 0===v?(0,i.jsx)(o.Placeholder,{label:"A remote folder",instructions:"Fill in the URL, folder name and an optional subfolder in the sidebar.",icon:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 512 512",children:(0,i.jsx)("g",{children:(0,i.jsxs)("g",{id:"Vrstva_1",children:[(0,i.jsx)("path",{d:"M327.6,240c-5.4-4.7-13.6-7.1-24.6-7.1h-51.9v60.8h52c10.9,0,19-2.4,24.6-7.2s8.2-12.7,8.2-23.6-2.8-18.1-8.3-22.8Z"}),(0,i.jsx)("path",{d:"M252.4,0L18.9,90.7h-.6v421.3h466.9V90.7h.6L252.4,0ZM161.8,411.9h-47.5v-216h47.5v216ZM342.1,411.9c-2.8-7.9-4.5-16.2-4.9-24.6-.6-9.5-1.5-18.4-2.7-27.2-1.6-11.3-5-19.5-10.3-24.8s-13.8-7.9-25.7-7.9h-47.5v84.4h-47.5v-215.9h116.4c8.9-.1,17.8,1.5,26.2,4.7,7.4,2.9,14.2,7.3,19.9,12.8,5.5,5.4,9.8,11.8,12.7,18.9,3,7.3,4.5,15.2,4.4,23.1.3,11.5-2.4,22.9-7.9,33-6,9.9-15.3,17.3-26.2,21.2v.6c5.3,1.3,10.3,3.9,14.5,7.4,3.8,3.3,7,7.3,9.4,11.8,2.5,4.7,4.3,9.7,5.3,15,1.1,5.4,1.9,10.9,2.3,16.3.2,3.4.4,7.5.6,12.1s.6,9.2,1.1,14.2c.5,4.6,1.3,9.2,2.4,13.7.9,4,2.6,7.7,5,11.1h-47.6Z"})]})})})}):(0,i.jsx)("remote-folder-app",{url:l,subfolder:c,folder:v,palette:h,style:{pointerEvents:"none"}})})]})},icon:{src:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 512 512",children:(0,i.jsx)("g",{children:(0,i.jsxs)("g",{id:"Layer one",children:[(0,i.jsx)("path",{d:"M327.6,240c-5.4-4.7-13.6-7.1-24.6-7.1h-51.9v60.8h52c10.9,0,19-2.4,24.6-7.2s8.2-12.7,8.2-23.6-2.8-18.1-8.3-22.8Z"}),(0,i.jsx)("path",{d:"M252.4,0L18.9,90.7h-.6v421.3h466.9V90.7h.6L252.4,0ZM161.8,411.9h-47.5v-216h47.5v216ZM342.1,411.9c-2.8-7.9-4.5-16.2-4.9-24.6-.6-9.5-1.5-18.4-2.7-27.2-1.6-11.3-5-19.5-10.3-24.8s-13.8-7.9-25.7-7.9h-47.5v84.4h-47.5v-215.9h116.4c8.9-.1,17.8,1.5,26.2,4.7,7.4,2.9,14.2,7.3,19.9,12.8,5.5,5.4,9.8,11.8,12.7,18.9,3,7.3,4.5,15.2,4.4,23.1.3,11.5-2.4,22.9-7.9,33-6,9.9-15.3,17.3-26.2,21.2v.6c5.3,1.3,10.3,3.9,14.5,7.4,3.8,3.3,7,7.3,9.4,11.8,2.5,4.7,4.3,9.7,5.3,15,1.1,5.4,1.9,10.9,2.3,16.3.2,3.4.4,7.5.6,12.1s.6,9.2,1.1,14.2c.5,4.6,1.3,9.2,2.4,13.7.9,4,2.6,7.7,5,11.1h-47.6Z"})]})})})}})}},o={};function n(e){var r=o[e];if(void 0!==r)return r.exports;var l=o[e]={exports:{}};return t[e](l,l.exports,n),l.exports}n.m=t,e=[],n.O=(t,o,r,l)=>{if(!o){var s=1/0;for(d=0;d<e.length;d++){o=e[d][0],r=e[d][1],l=e[d][2];for(var a=!0,i=0;i<o.length;i++)(!1&l||s>=l)&&Object.keys(n.O).every((e=>n.O[e](o[i])))?o.splice(i--,1):(a=!1,l<s&&(s=l));if(a){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[o,r,l]},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={375:0,671:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var r,l,s=o[0],a=o[1],i=o[2],c=0;if(s.some((t=>0!==e[t]))){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(i)var d=i(n)}for(t&&t(o);c<s.length;c++)l=s[c],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(d)},o=self.webpackChunk_labir_wordpress=self.webpackChunk_labir_wordpress||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var r=n.O(void 0,[671],(()=>n(365)));r=n.O(r)})();